import{h as H,l as ce,a as Ge,s as ee,n as Ue,o as Je,c as x,p as We,q as Ze,t as O,e as p,d as i,f as $e,g as J,r as _e,j as pe}from"../chunks/disclose-version.BdEHOQWg.js";import{t as je,k as xe,H as ea,v as aa,Q as ra,w as Ee,x as Te,y as ta,a6 as la,X as ia,a7 as P,l as I,a8 as se,a9 as ie,n as Ce,s as ne,aa as na,ab as sa,ac as oa,ad as va,i as da,f as ua,ae as fa,af as ca,ag as _a,ah as pa,a4 as ha,K as Ie,M as Le,N as Ne,O as Oe,g as Q,ai as N,aj as ma}from"../chunks/runtime.FWcQ7iJV.js";import{b as ba,a as F,i as W}from"../chunks/props.C8lJrZ7S.js";import{i as ga}from"../chunks/lifecycle.D9rX46yd.js";import{g as he}from"../chunks/entry.BnyI2Ki3.js";import{S as me}from"../chunks/services.gen.Dg7BI9Bw.js";let ae=null;function wa(e,a,r){for(var t=[],l=e.length,o=0;o<l;o++)na(e[o].e,t,!0);var d=l>0&&t.length===0&&a!==null;if(d){var h=a.parentNode;Je(h),h.append(a),r.clear(),C(e[0].prev,e[l-1].next)}sa(t,()=>{for(var m=0;m<l;m++){var c=e[m];d||(r.delete(c.k),C(c.prev,c.next)),oa(c.e,!d)}})}function Sa(e,a,r,t,l,o=null){var d={flags:a,items:new Map,next:null},h=null;je(()=>{var m=r(),c=xe(m)?m:m==null?[]:Array.from(m),y=c.length,n=d.flags;n&ie&&!da(c)&&!(ua in c)&&(n^=ie,n&fa&&!(n&P)&&(n^=P));let g=!1;if(H){var _=e.data===ea;(_!==(y===0)||ce===void 0)&&(aa(Ge),ee(!1),g=!0)}if(H){for(var b=ce,w=d,u,f=0;f<y;f++){if(b.nodeType!==8||b.data!==ra){g=!0,ee(!1);break}b=Ue(b);var S=c[f],s=t(S,f);u=qe(b,w,null,S,s,f,l,n),d.items.set(s,u),b=b.nextSibling,w=u}if(y>0)for(;b!==e;){var v=b.nextSibling;b.remove(),b=v}}H||ya(c,d,e,l,n,t),o!==null&&(y===0?h?Ee(h):h=Te(()=>o(e)):h!==null&&ta(h,()=>{h=null})),g&&ee(!0)})}function ya(e,a,r,t,l,o){var z,G,U,Y;var d=(l&va)!==0,h=(l&(P|se))!==0,m=e.length,c=a.items,y=a.next,n=y,g=new Set,_=a,b=new Set,w=[],u=[],f,S,s,v;if(d)for(v=0;v<m;v+=1)f=e[v],S=o(f,v),s=c.get(S),s!==void 0&&((z=s.a)==null||z.measure(),b.add(s));for(v=0;v<m;v+=1){if(f=e[v],S=o(f,v),s=c.get(S),s===void 0){var q=n?V(n.e):r;_=qe(q,_,_.next,f,S,v,t,l),c.set(S,_),w=[],u=[],n=_.next;continue}if(h&&ka(s,f,v,l),s.e.f&la&&(Ee(s.e),d&&((G=s.a)==null||G.unfix(),b.delete(s))),s!==n){if(g.has(s)){if(w.length<u.length){var E=u[0],k;_=E.prev;var R=w[0],B=w[w.length-1];for(k=0;k<w.length;k+=1)ge(w[k],E,r);for(k=0;k<u.length;k+=1)g.delete(u[k]);C(R.prev,B.next),C(_,R),C(B,E),n=E,_=B,v-=1,w=[],u=[]}else g.delete(s),ge(s,n,r),C(s.prev,s.next),C(s,_.next),C(_,s),_=s;continue}for(w=[],u=[];n!==null&&n.k!==S;)g.add(n),u.push(n),n=n.next;if(n===null)continue;s=n}w.push(s),_=s,n=s.next}const L=Array.from(g);for(;n!==null;)L.push(n),n=n.next;var D=L.length;if(D>0){var X=l&ca&&m===0?r:null;if(d){for(v=0;v<D;v+=1)(U=L[v].a)==null||U.measure();for(v=0;v<D;v+=1)(Y=L[v].a)==null||Y.fix()}wa(L,X,c)}d&&ia(()=>{var M;for(s of b)(M=s.a)==null||M.apply()})}function ka(e,a,r,t){t&P&&I(e.v,a),t&se?I(e.i,r):e.i=r}function qe(e,a,r,t,l,o,d,h){var m=ae;try{var c=(h&P)!==0,y=(h&ie)===0,n=c?y?Ce(t):ne(t):t,g=h&se?ne(o):o,_={i:g,v:n,k:l,a:null,e:null,prev:a,next:r};return a.next=_,r!==null&&(r.prev=_),ae=_,_.e=Te(()=>d(e,n,g)),_}finally{ae=m}}function be(e,a){if(e.nodeType===3&&e.data===""||e.nodeType===8){for(var r=a.first,t;r!==null&&(t=r.first,r.dom===null);){if(t===null)return e.previousSibling;r=t}return V(r)}return e}function V(e){var a=e.dom;return xe(a)?be(a[0],e):be(a,e)}function ge(e,a,r){for(var t=e.next?V(e.next.e):r,l=a?V(a.e):r,o=V(e.e);o!==t;){var d=o.nextSibling;l.before(o),o=d}}function C(e,a){e.next=a,a!==null&&(a.prev=e)}let we=!1;function De(){we||(we=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var a;if(!e.defaultPrevented)for(const r of e.target.elements)(a=r.__on_r)==null||a.call(r)})},{capture:!0}))}function re(e){if(H){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;Se(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var l=e.checked;Se(e,"checked",null),e.checked=l}}};e.__on_r=r,_a(r),De()}}function Se(e,a,r){r=r==null?null:r+"";var t=e.__attributes??(e.__attributes={});H&&(t[a]=e.getAttribute(a),a==="src"||a==="href"||a==="srcset")||t[a]!==(t[a]=r)&&(a==="loading"&&(e[pa]=r),r===null?e.removeAttribute(a):e.setAttribute(a,r))}function Me(e,a,r){r?e.classList.add(a):e.classList.remove(a)}function He(e,a,r,t=r){e.addEventListener(a,r);const l=e.__on_r;l?e.__on_r=()=>{l(),t()}:e.__on_r=t,De()}function te(e,a,r){He(e,"input",()=>{r(ye(e)?ke(e.value):e.value)}),ha(()=>{var t=a();if(H&&e.defaultValue!==e.value){r(e.value);return}ye(e)&&t===ke(e.value)||e.type==="date"&&!t&&!e.value||(e.value=t??"")})}function ye(e){var a=e.type;return a==="number"||a==="range"}function ke(e){return e===""?null:+e}function Re(e,a,r){if(e.multiple)return xa(e,a);for(var t of e.options){var l=K(t);if(ba(l,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function Aa(e,a){Ie(()=>{var r=new MutationObserver(()=>{var t=e.__value;Re(e,t)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Ae(e,a,r){var t=!0;He(e,"change",()=>{var l;if(e.multiple)l=[].map.call(e.querySelectorAll(":checked"),K);else{var o=e.querySelector(":checked");l=o&&K(o)}r(l)}),Ie(()=>{var l=a();if(Re(e,l,t),t&&l===void 0){var o=e.querySelector(":checked");o!==null&&(l=K(o),r(l))}e.__value=l,t=!1}),Aa(e)}function xa(e,a){for(var r of e.options)r.selected=~a.indexOf(K(r))}function K(e){return"__value"in e?e.__value:e.value}var Ea=We('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"></path></svg>');function Ta(e){var a=Ea();x(e,a)}async function Ca(e,a,r,t){await a.setActiveSlideshow({requestBody:{active_slideshow:r()}}),await t("/",{invalidateAll:!0})}async function Ia(e,a,r,t,l,o,d){a()?(await r.createSlideshow({foldername:t(),requestBody:l()}),o(!1)):await r.updateSpecificSlideshow({foldername:t(),requestBody:l()}),await d("/",{invalidateAll:!0})}var La=(e,a)=>I(a,!Q(a)),Na=(e,a)=>I(a,!Q(a)),Oa=O('<div class="field"><label for="Foldername" class="label">Foldername</label> <div class="control"><input class="input svelte-1polisb" type="text" id="Foldername"></div></div>'),qa=(e,a)=>a(!1),Da=O('<a class="card-footer-item">Cancel</a>'),Ma=O('<a class="card-footer-item">Set Active</a>'),Ha=O('<div class="card-content"><div class="content"><!> <div class="field"><label for="slide-duration" class="label">Slide Duration (seconds)</label> <div class="control"><input class="input svelte-1polisb" type="number" placeholder="4.0" min="0.1" step="0.1" required id="slide-duration"></div></div> <div class="field"><label for="transition-duration" class="label">Transition Duration (seconds)</label> <div class="control"><input class="input svelte-1polisb" type="number" placeholder="4.0" min="0" step="0.1" required id="transition-duration"></div></div> <div class="field"><label for="sort" class="label">Sort</label> <div class="control"><div class="select"><select id="sort"><option>filename</option><option>natural</option><option>random</option></select></div></div></div> <div class="field"><label for="sort" class="label">Text to display</label> <div class="control"><div class="select"><select id="sort"><option>filename</option><option>caption</option><option>none</option></select></div></div></div></div></div> <footer class="card-footer"><!> <a class="card-footer-item">Save</a></footer>',1),Ra=O('<div class="card"><header class="card-header"><p class="card-header-title"> </p> <button class="card-header-icon" aria-label="more options"><span class="icon"><!></span></button></header> <!></div>');function le(e,a){Le(a,!0);let r=F(a,"foldername",7),t=F(a,"settings",7),l=F(a,"newSlideshow",3,!1),o=F(a,"modal",7),d=ne(!1);l()&&I(d,!0);var h=Ra(),m=p(h),c=p(m);c.__click=[La,d];var y=p(c),n=i(i(c,!0));n.__click=[Na,d];var g=p(n),_=p(g);Ta(_);var b=i(i(m,!0));W(b,()=>Q(d),w=>{var u=Ha(),f=J(u),S=p(f),s=p(S);W(s,l,A=>{var T=Oa(),Qe=p(T),Xe=i(i(Qe,!0)),fe=p(Xe);re(fe),te(fe,r,ze=>r(ze)),x(A,T)});var v=i(i(s,!0)),q=p(v),E=i(i(q,!0)),k=p(E);re(k);var R=i(i(v,!0)),B=p(R),L=i(i(B,!0)),D=p(L);re(D);var X=i(i(R,!0)),z=p(X),G=i(i(z,!0)),U=p(G),Y=p(U),M=p(Y);M.value=(M.__value="filename")==null?"":"filename";var Z=i(M);Z.value=(Z.__value="natural")==null?"":"natural";var oe=i(Z);oe.value=(oe.__value="random")==null?"":"random";var Be=i(i(X,!0)),Ye=p(Be),Fe=i(i(Ye,!0)),Ve=p(Fe),ve=p(Ve),$=p(ve);$.value=($.__value="filename")==null?"":"filename";var j=i($);j.value=(j.__value="caption")==null?"":"caption";var de=i(j);de.value=(de.__value="none")==null?"":"none";var Ke=i(i(f,!0)),ue=p(Ke);W(ue,l,A=>{var T=Da();T.__click=[qa,o],x(A,T)},A=>{var T=Ma();T.__click=[Ca,me,r,he],x(A,T)});var Pe=i(i(ue,!0));Pe.__click=[Ia,l,me,r,t,o,he],te(k,()=>t().duration,A=>t(t().duration=A,!0)),te(D,()=>t().transition_duration,A=>t(t().transition_duration=A,!0)),Ae(Y,()=>t().sort,A=>t(t().sort=A,!0)),Ae(ve,()=>t().display,A=>t(t().display=A,!0)),x(w,u)}),Ne(()=>{Me(c,"is-clickable",!l()),$e(y,r())}),x(e,h),Oe()}Ze(["click"]);var Ba=O('<p class="block">There is currently no active slideshow set</p>'),Ya=O('<h2 class="subtitle is-4">Active Slideshow</h2> <!> <h2 class="subtitle is-4">Slideshows</h2> <button class="button is-primary mb-4">New Slideshow</button> <div class="modal"><div class="modal-background"></div> <div class="modal-card"><!></div></div> <!>',1);function za(e,a){Le(a,!1);let r=F(a,"data",4),t=Ce(!1),l="",o={display:"none",transition_duration:0,duration:0,sort:"filename"};ga();var d=Ya(),h=J(d),m=i(i(h,!0));W(m,()=>r().active_slideshow,u=>{var f=pe(),S=J(f);le(S,{get foldername(){return r().active_slideshow},get settings(){return r().slideshows[r().active_slideshow]},set settings(s){r(r().slideshows[r().active_slideshow]=s,!0)},$$legacy:!0}),x(u,f)},u=>{var f=Ba();x(u,f)});var c=i(i(m,!0)),y=i(i(c,!0)),n=i(i(y,!0)),g=p(n),_=i(i(g,!0)),b=p(_);le(b,{foldername:l,settings:o,newSlideshow:!0,get modal(){return Q(t)},set modal(u){I(t,u)},$$legacy:!0});var w=i(i(n,!0));Sa(w,7,()=>Object.entries(r().slideshows),(u,f)=>N(N(u))[0],(u,f,S)=>{let s=()=>N(N(f))[0],v=()=>N(N(f))[1];var q=pe(),E=J(q);le(E,{get foldername(){return s()},get settings(){return v()},set settings(k){N(f)[1]=k,ma(()=>Object.entries(r().slideshows))},$$legacy:!0}),x(u,q)}),Ne(()=>Me(n,"is-active",Q(t))),_e("click",y,()=>I(t,!0),!1),_e("click",g,()=>I(t,!1),!1),x(e,d),Oe()}export{za as component};
